基于《深入浅出 nodeJS》，可能与现在 node 实现有所不同

## Node的特点

* 异步 I/O + 回调
* 单线程
  * 问题：
    * 无法利用多核
    * 错误引起整个程序退出
    * 大量计算占用 CPU 无法继续调用异步 I/O
  * 解决：
    * 创建新的线程
    * 浏览器端 web worker 解决
    * node 端 child_process 解决

## CommonJS 规范

* 优先从换从加载，缓存的是编译和执行之后的对象
* 路径分析和文件定位
  * 模块标识符分析
    * 核心模块
    * 路径
    * 非路径文件模块（node_modules查找等）
  * 文件定位
    * 文件名分析，如后缀补全
    * 目录分析和包，
  * 模块编译
    * 类型
      * .js 文件：通过 fs 模块同步读取并编译执行
      * .node 文件：C/C++ 编写
      * .json文件：fs 读取，JSON.parse()
      * .其他扩展名文件：当做 .js 文件
    * 具体过程
      * .js文件：读取后对文件进行头尾包装，封装进函数，此时会提供 exports、require 等模块化语法的声明（实现）